<!DOCTYPE html>
<html lang="en">
<head>
	
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1, width=device-width">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	
	<title>Fractals</title>
	
	<meta name="keywords" content="mandelbrot,julia,fractals">
	<meta name="description" content="A quick web-based javascript viewer for both the Mandelbrot and Julia sets">
	

</head>
<body>
	<canvas id="viewer" width="100" height="100" style="border:#eee;"></canvas>
  
  <script src="qfm.js"></script>
  <script src="fv.js"></script>
  
  <script>
	  var canceller = {cancel:false};
	  var maxIterations = 500;
	  var lookupTable;
	  
	  (async function () {
		lookupTable = await fv.genLookupTable(100,100);
		
	  })();
	  
		const canvas = document.getElementById("viewer");
	  	const ctx = canvas.getContext('2d', { alpha: false });
	  
	  	lookupFunc = (x,y) => {
			const xi = fv.map(x,0,100,-2,1);
			const yi = fv.map(y,0,100,-1.5,1.5);
			
			const i = qfm.mandelbrot(xi,yi,maxIterations);
			
			if (i === maxIterations) { return "#000000"; }
  			return "hsl(0,100%,"+(i%100)+"%)";
		}
		
		fv.draw(lookupFunc,lookupTable,ctx,canceller);
	  
		
	
  </script>
</body>
</html>
